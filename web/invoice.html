<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>CANO Store | Invoice</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
        <link rel="icon" type="image/png" href="images/icons/favicon.png" />
        <style>
            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                background-color: #f8f9fa;
            }
            #invoice {
                background: #fff;
                border-radius: 12px;
                padding: 30px;
                box-shadow: 0 4px 15px rgba(0,0,0,0.1);
                max-width: 900px;
                margin: auto;
            }
            #invoice h2 {
                color: #0d6efd;
                font-weight: 700;
            }
            .table thead th {
                background-color: #e9ecef;
                font-weight: 600;
            }
            .table tbody td {
                vertical-align: middle;
            }
            .product-img {
                width: 50px;
                height: 50px;
                object-fit: cover;
                border-radius: 6px;
            }
            .btn-custom {
                border-radius: 8px;
                padding: 10px 20px;
                font-weight: 500;
            }
            .table tfoot tr td {
                font-weight: 700;
                font-size: 1.1rem;
                background-color: #f1f3f5;
            }
            .grand-total {
                color: #0d6efd;
            }
            .invoice-footer {
                text-align: center;
                margin-top: 40px;
                font-size: 0.95rem;
                color: #6c757d;
                border-top: 1px solid #dee2e6;
                padding-top: 15px;
            }
            .invoice-footer p {
                margin: 0;
            }
            #qrCode {
                width: 120px;
                height: 120px;
                border: 1px solid #ccc;
                border-radius: 8px;
            }
            @media (max-width: 767px) {
                .table-responsive {
                    overflow-x: auto;
                }
                #invoice h2 {
                    font-size: 3rem;
                }
                .order-info-qr {
                    flex-direction: column !important;
                    align-items: flex-start !important;
                }
                #qrCode {
                    margin-top: 10px;
                    margin-left: 20px
                }
            }
        </style>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    </head>
    <body>
        <div class="mb-1 d-print-none">
            <button class="btn btn-outline-dark btn-sm" 
                    onclick="window.location.href = 'home.html'" 
                    style="margin-left: 30px; margin-top: 20px; width: 150px; font-weight: bold; height: 40px; font-size: 20px;">
                Back
            </button>
        </div>

        <main class="container my-2">
            <article id="invoice" class="card p-4">

                <header class="d-flex justify-content-between align-items-center mb-4 flex-wrap">
                    <img src="images/icons/CanoLogoFull.png" alt="Cano Store Logo" style="width: 200px">
                    <span class="text-uppercase table-bordered text-success" style="font-size: 4rem;">Invoice</span>
                </header>
                <hr>
                <section class="row mb-4 mt-3 order-info-qr d-flex align-items-start">
                    <div class="col-md-6">
                        <h5>Customer Details</h5>
                        <p><strong>Name:</strong> <span id="customerName">Loading...</span></p>
                        <p><strong>Address:</strong> <span id="customerAddress">Loading...</span></p>
                    </div>
                    <div class="col-md-6 d-flex justify-content-end gap-3 flex-wrap">
                        <div>
                            <h5>Order Info</h5>
                            <p><strong>Order ID:</strong> <span id="orderId">Loading...</span></p>
                            <p><strong>Date:</strong> <span id="invoiceDate">Loading...</span></p>
                            <p><strong>Status:</strong> <span id="orderStatus">Loading...</span></p>
                        </div>
                        <div>
                            <h6>Scan for Order</h6>
                            <img id="qrCode" alt="Order QR Code">
                        </div>
                    </div>
                </section>
                <div class="table-responsive">
                    <table class="table table-bordered align-middle">
                        <thead>
                            <tr>
                                <th>Product</th>
                                <th>Image</th>
                                <th>Color</th>
                                <th>Size</th>
                                <th>Qty</th>
                                <th>Unit Price</th>
                                <th>Total</th>
                            </tr>
                        </thead>
                        <tbody id="itemsBody">
                            <tr><td colspan="7" class="text-center">Loading items...</td></tr>
                        </tbody>
                        <tfoot>
                            <tr>
                                <td colspan="6" class="text-end grand-total">Shipping : </td>
                                <td class="delivery" id="delivery">0.00 </td>
                            </tr>
                            <tr>
                                <td colspan="6" class="text-end grand-total">Discount : </td>
                                <td class="discount" id="discount">0.00 </td>
                            </tr>
                            <tr>
                                <td colspan="6" class="text-end grand-total">Grand Total : </td>
                                <td class="grand-total" id="grandTotal">0.00 </td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
                <div class="mt-4 d-flex justify-content-end gap-2 flex-wrap">
                    <button class="btn btn-primary btn-custom" onclick="window.print()">Print Invoice</button>
                    <button class="btn btn-success btn-custom" id="downloadBtn">Download PDF</button>
                </div>
                <footer class="invoice-footer mt-4">
                    <h5>Thank you for your business!</h5>
                    <p>CANO Store | Excellence in Fashion | www.canostore.com</p>
                    <p>Contact: +94 77 230 1478 | support@canostore.com</p>
                </footer>
            </article>
        </main>


        <script src="js/invoice.js"></script>
    </body>
</html>
